int NUM = 1; //センサーの数
 
//int[] sensors = new int[NUM]; //センサーの値を格納する配列
//int cnt; //カウンター
int w = 0;
int h = 0;
 
// グラフの線の色を格納
color[] col = new color[6];

// number of frames per 1 second
int numFrames = 10;

// y zahyo on one step before
float tyOld = 0;

int thickness = 10;

float heightCoef = 1.5;

float[] sensors = {
  0.872405,
  0.626342,
  3.73568,
  8.27666,
  10.8939,
  14.4282,
  17.9626,
  19.6179,
  22.4588,
  23.8457,
  27.0446,
  28.3644,
  30.1986,
  31.429,
  31.7645,
  32.8606,
  33.9567,
  34.158,
  33.3975,
  33.5317,
  33.3751,
  34.5159,
  35.3883,
  36.216,
  37.5805,
  38.2964,
  39.2806,
  39.6385,
  39.4372,
  41.0925,
  40.5109,
  41.7189,
  42.9939,
  43.2847,
  43.8663,
  44.269,
  46.0585,
  46.6178,
  46.5283,
  48.027,
  48.3178,
  46.3046,
  46.6178,
  47.0875,
  50.2863,
  50.7337,
  50.8903,
  51.114,
  51.1364,
  51.8522,
  51.8522,
  50.0179,
  49.7047,
  50.0626,
  47.9823,
  47.9823,
  47.9375,
  48.0047,
  44.7387,
  45.6111,
  45.9243,
  47.6244,
  47.0651,
  45.723,
  45.0519,
  44.1124,
  43.5979,
  42.6584,
  42.1662,
  41.3833,
  37.7147,
  36.8647,
  35.3212,
  32.3461,
  28.8565,
  25.3669,
  19.1929,
  14.5401,
  11.4755,
  7.65032,
  5.41339,
  2.66195,
  1.9014,
  0.71582,
  1.14084,
  1.49875,
  2.66195,
  3.46725,
  6.10684,
  6.59896,
  11.9229,
  16.5533,
  16.0165,
  16.7547,
  17.2691,
  19.8864,
  19.864,
  22.772,
  24.4273,
  25.7471,
  27.0222,
  28.6104,
  29.5723,
  30.3552,
  31.3395,
  32.2343,
  33.554,
  34.1133,
  35.187,
  34.9633,
  34.9409,
  35.187,
  34.8962,
  34.2028,
  33.4646,
  32.9277,
  31.9434,
  31.0934,
  30.1092,
  29.3933,
  29.2144,
  27.9617,
  28.0512,
  28.4986,
  28.3644,
  29.2815,
  29.8184,
  28.8117,
  30.5565,
  29.6618,
  30.9592,
  31.5632,
  34.1133,
  33.4198,
  33.3527,
  31.6079,
  33.9343,
  35.366,
  35.366,
  36.9989,
  37.0213,
  36.4844,
  36.7529,
  37.245,
  36.8871,
  34.5159,
  33.6659,
  33.2409,
  30.1092,
  27.5591,
  25.5458,
  23.3312,
  20.9601,
  18.2534,
  17.0007,
  14.5625,
  14.3164,
  13.4216,
  12.3031,
  10.6478,
  10.5136,
  9.05959,
  7.85165,
  6.55422,
  4.76467,
  3.40014,
  0.894775,
  0.581603,
  0.402649,
  1.14084,
  2.14746,
  3.75805,
  4.36203,
  6.19631,
  9.90963,
  12.3031,
  14.8533,
  17.202,
  19.4613,
  21.0272,
  20.9825,
  23.5102,
  23.4655,
  26.7985,
  24.2484,
  26.8209,
  26.105,
  25.7248,
  25.7471,
  26.3735,
  27.1788,
  27.3801,
  27.1788,
  26.4853,
  28.9012,
  29.1249,
  28.9683,
  31.3171,
  32.4356,
  33.4422,
  33.4422,
  34.0462,
  34.8738,
  35.8805,
  37.0884,
  36.1936,
  35.7239,
  34.7844,
  35.0752,
  32.704,
  36.1265,
  37.3121,
  37.8266,
  38.699,
  39.3253,
  40.8241,
  42.211,
  41.9426,
  43.3071,
  43.4413,
  43.3518,
  43.6874,
  43.8216,
  44.3584,
  43.9111,
  44.3584,
  44.2913,
  44.269,
  44.0005,
  43.7545,
  43.1505,
  44.1795,
  43.9111,
  42.9939,
  41.9873,
  41.607,
  41.003,
  41.1596,
  42.211,
  42.211,
  42.5465,
  42.5465,
  44.9624,
  45.1414,
  45.544,
  45.8348,
  45.4545,
  45.0966,
  45.6782,
  45.6111,
  45.4545,
  44.9624,
  43.7992,
  43.844,
  43.0163,
  42.2334,
  41.361,
  39.5267,
  37.7595,
  35.5002,
  33.1738,
  30.4671,
  28.2749,
  25.7471,
  23.1299,
  20.289,
  17.3586,
  16.0836,
  11.8781,
  9.75304,
  8.76879,
  7.58321,
  5.16732,
  3.15408,
  2.43826,
  0.760558,
  0.380279
};

void setup() {
  //画面設定
  size(852, 480);
  frameRate(60);
  
  //グラフ初期化
  initGraph();
}
 
void draw() {
  // センサーの数だけ、グラフをプロット  
  float tx = map(w*thickness, 0, width, 0, width);
  float ty = map(sensors[w]*(h + 1)*heightCoef, 0, 1023, height, 0);
  float tyOld = map(sensors[w]*h*heightCoef, 0, 1023, height, 0);
  strokeWeight(thickness);
  stroke(col[0]);
  line(tx, tyOld, tx, ty);
  // 画面の右端まで描画したら再初期化
  if (w > width) {
    initGraph();
  }

  delay(100);
  saveFrame("frames/######.tif");

  if (h == 10) {
    h = 0;
    w++;
  }
  else {
    h++;
  }
}
 
//グラフの初期化
void initGraph() {
  background(47);
  noStroke();
  //cnt = 0;
  w = 0;
  // グラフ描画の線の色を定義
  col[0] = color(255, 127, 31);
  col[1] = color(31, 255, 127);
  col[2] = color(127, 31, 255);
  col[3] = color(31, 127, 255);
  col[4] = color(127, 255, 31);
  col[5] = color(127);
}